{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "userType": {
          "type": "string",
          "description": "The type of user account. Can be 'admin', 'communityLeader', or 'responder'."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "The phone number of the user."
        },
        "nrc": {
          "type": "string",
          "description": "The National Registration Card number of the user."
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date",
          "description": "The date of birth of the user."
        },
        "occupation": {
          "type": "string",
          "description": "The occupation of the user."
        },
        "province": {
          "type": "string",
          "description": "The province where the user resides."
        },
        "district": {
          "type": "string",
          "description": "The district where the user resides."
        },
        "departmentId": {
          "type": "string",
          "description": "Reference to Department. (Relationship: User 1:N Department)."
        },
        "location": {
          "type": "object",
          "description": "The last known geographical location of the user.",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" }
          }
        },
        "locationMetadata": {
            "type": "object",
            "description": "Additional metadata about the user's location.",
            "properties": {
                "accuracy": { "type": "number" },
                "heading": { "type": ["number", "null"] },
                "speed": { "type": ["number", "null"] },
                "updatedAt": { "type": "string", "format": "date-time" }
            }
        }
      },
      "required": [
        "id",
        "userType",
        "firstName",
        "lastName",
        "phoneNumber",
        "nrc",
        "dateOfBirth",
        "occupation",
        "province",
        "district"
      ]
    },
    "Department": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Department",
      "type": "object",
      "description": "Represents a government department or official agency.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the department entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the department (e.g., Zambia Police Service)."
        },
        "category": {
          "type": "string",
          "description": "Category of the department.",
          "enum": ["Police", "Fire", "Ambulance", "Council", "Health", "Disaster", "Other"]
        },
        "province": {
          "type": "string",
          "description": "The province where the department is located."
        },
        "district": {
          "type": "string",
          "description": "The district where the department is located."
        },
        "officeAddress": {
          "type": "string",
          "description": "The physical office address of the department."
        },
        "contactNumbers": {
          "type": "object",
          "properties": {
            "landline": { "type": "string" },
            "responders": { "type": "array", "items": { "type": "string" } }
          }
        },
        "incidentTypesHandled": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of incident types this department handles."
        },
        "operatingHours": {
          "type": "string",
          "description": "The operating hours of the department (e.g., 24/7, 9am-5pm)."
        },
        "escalationRules": {
          "type": "string",
          "description": "Description of rules for escalating incidents."
        },
        "priorityAssignmentRules": {
          "type": "string",
          "description": "Description of rules for assigning priority to incidents."
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "province",
        "district"
      ]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "Represents a role-based access level.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the role entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the role (e.g., Admin, Community Leader)."
        },
        "description": {
          "type": "string",
          "description": "A description of the role and its permissions."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "UserRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserRole",
      "type": "object",
      "description": "Links users to their assigned roles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserRole entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User N:N Role)"
        },
        "roleId": {
          "type": "string",
          "description": "Reference to Role. (Relationship: User N:N Role)"
        }
      },
      "required": [
        "id",
        "userId",
        "roleId"
      ]
    },
    "Incident": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Incident",
      "type": "object",
      "description": "Represents a reported incident.",
      "properties": {
        "title": {
          "type": "string",
          "description": "Title of the incident."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the incident."
        },
        "location": {
          "type": "string",
          "description": "Location of the incident."
        },
        "category": {
          "type": "string",
          "description": "Category of the incident (e.g., Crime, Fire)."
        },
        "status": {
          "type": "string",
          "description": "Current status of the incident."
        },
        "priority": {
          "type": "string",
          "description": "Priority of the incident."
        },
        "dateReported": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the incident was reported."
        },
        "reporter": {
          "type": "object",
          "properties": {
            "userId": {
              "type": "string"
            }
          }
        },
        "media": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "investigationNotes": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "note": { "type": "string" },
                    "authorId": { "type": "string" },
                    "authorName": { "type": "string" },
                    "timestamp": { "type": "string", "format": "date-time" }
                },
                "required": ["note", "authorId", "authorName", "timestamp"]
            }
        },
        "aiMetadata": {
            "type": "object",
            "properties": {
              "suggestedCategories": { "type": "array", "items": { "type": "string" } },
              "isDuplicate": { "type": "boolean" },
              "isSuspicious": { "type": "boolean" }
            }
        },
        "assignedTo": {
            "type": ["string", "null"],
            "enum": ["Police", "Fire", "Ambulance", null],
            "description": "The responder unit assigned to the incident."
        },
        "dateVerified": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the incident was verified."
        },
        "dateDispatched": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when a team was dispatched."
        },
        "dateResolved": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the incident was resolved."
        }
      },
      "required": ["title", "description", "location", "category", "status", "dateReported", "reporter"]
    },
    "Asset": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Asset",
      "type": "object",
      "description": "Represents a physical or digital asset belonging to a department.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the asset."
        },
        "departmentId": {
          "type": "string",
          "description": "The ID of the department this asset belongs to."
        },
        "assetType": {
          "type": "string",
          "enum": ["Vehicle", "Equipment", "Station/Post", "Response Team"],
          "description": "The type of the asset."
        },
        "name": {
          "type": "string",
          "description": "A descriptive name for the asset (e.g., 'Patrol Car 12', 'Fire Extinguisher #5')."
        },
        "status": {
          "type": "string",
          "description": "Current status of the asset (e.g., 'Active', 'Under Maintenance', 'Decommissioned')."
        },
        "details": {
          "type": "object",
          "description": "Additional details specific to the asset type."
        }
      },
      "required": ["id", "departmentId", "assetType", "name", "status"]
    },
    "ElectionSecurityAlert": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ElectionSecurityAlert",
      "type": "object",
      "description": "Represents a security alert related to an election.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the alert."
        },
        "title": {
          "type": "string",
          "description": "A brief title for the alert."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the alert."
        },
        "severity": {
          "type": "string",
          "enum": ["Low", "Medium", "High", "Critical"],
          "description": "The severity level of the alert."
        },
        "area": {
          "type": "string",
          "description": "The geographical area affected by the alert (e.g., Province, District)."
        },
        "status": {
          "type": "string",
          "enum": ["New", "Investigating", "Actioned", "Resolved", "Closed"],
          "description": "The current status of the alert."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The time the alert was created."
        }
      },
      "required": ["id", "title", "severity", "area", "status", "timestamp"]
    },
    "PollingStation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PollingStation",
      "type": "object",
      "description": "Represents a polling station and its real-time status.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the polling station." },
        "name": { "type": "string", "description": "The name of the polling station." },
        "province": { "type": "string", "description": "The province where the station is located." },
        "district": { "type": "string", "description": "The district where the station is located." },
        "status": { "type": "string", "enum": ["Open", "Closed", "Delayed", "Interrupted"], "description": "Current operational status." },
        "queueLength": { "type": "number", "description": "Estimated number of people in the queue." },
        "hasMissingMaterials": { "type": "boolean", "description": "Flag for missing electoral materials." },
        "staffAttendance": { 
          "type": "object",
          "properties": {
            "present": { "type": "number" },
            "absent": { "type": "number" }
          },
          "description": "Staff attendance count."
        },
        "hasPowerOutage": { "type": "boolean", "description": "Flag for power outage." },
        "hasTamperingReport": { "type": "boolean", "description": "Flag for any tampering reports." },
        "registeredVoters": { "type": "number", "description": "Total number of registered voters." },
        "lastCheckin": { "type": "string", "format": "date-time", "description": "Timestamp of the last status update." },
        "location": {
          "type": "object",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" }
          }
        }
      },
      "required": ["id", "name", "province", "district", "status"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "database": {
    "rules": "{\n  \"rules\": {\n    \".read\": \"auth != null\",\n    \".write\": \"auth != null\",\n    \"users\": {\n      \"$uid\": {\n        \".write\": \"auth != null && auth.uid === $uid\"\n      }\n    }\n  }\n}"
  }
}
